service: chilo-sls-integration

frameworkVersion: "*"

provider:
    name: aws
    runtime: python3.10
    stage: local
    region: us-east-1
    environment:
        PYTHONUNBUFFERED: "1"
        PYTHONPATH: "../../.."

plugins:
    - serverless-python-requirements
    - serverless-offline

custom:
    pythonRequirements:
        usePipenv: true
        slim: true
        dockerizePip: false
        invalidateCaches: true
        pythonBin: "../../.integration-venv/bin/python"

functions:
    pattern:
        handler: tests/integration/api/handler.pattern_handler
        events:
            - httpApi:
                  path: /integration/pattern/{proxy+}
                  method: ANY
    directory:
        handler: tests/integration/api/handler.directory_handler
        events:
            - httpApi:
                  path: /integration/directory/{proxy+}
                  method: ANY
